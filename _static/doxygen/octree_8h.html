<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASCOT5: octree.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ASCOT5
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">octree.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for <a class="el" href="octree_8c.html" title="Simple octree for storing triangles.">octree.c</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ascot5_8h_source.html">ascot5.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="list_8h_source.html">list.h</a>&quot;</code><br />
</div>
<p><a href="octree_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structoctree__node.html">octree_node</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct representing single octree node.  <a href="structoctree__node.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a213eac7af4c986e40b127323a2623b89"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structoctree__node.html">octree_node</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="octree_8h.html#a213eac7af4c986e40b127323a2623b89">octree_node</a></td></tr>
<tr class="memdesc:a213eac7af4c986e40b127323a2623b89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct representing single octree node.  <a href="octree_8h.html#a213eac7af4c986e40b127323a2623b89">More...</a><br /></td></tr>
<tr class="separator:a213eac7af4c986e40b127323a2623b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a63644b2d301b5599dff501129f610669"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="octree_8h.html#a63644b2d301b5599dff501129f610669">octree_create</a> (<a class="el" href="structoctree__node.html">octree_node</a> **node, <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> x_min, <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> x_max, <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> y_min, <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> y_max, <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> z_min, <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> z_max, int depth)</td></tr>
<tr class="memdesc:a63644b2d301b5599dff501129f610669"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create octree of given depth.  <a href="octree_8h.html#a63644b2d301b5599dff501129f610669">More...</a><br /></td></tr>
<tr class="separator:a63644b2d301b5599dff501129f610669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ebab3217beacb1201887631a364e75e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="octree_8h.html#a5ebab3217beacb1201887631a364e75e">octree_free</a> (<a class="el" href="structoctree__node.html">octree_node</a> **node)</td></tr>
<tr class="memdesc:a5ebab3217beacb1201887631a364e75e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free octree node and all its child nodes.  <a href="octree_8h.html#a5ebab3217beacb1201887631a364e75e">More...</a><br /></td></tr>
<tr class="separator:a5ebab3217beacb1201887631a364e75e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d0722050bcdd7588e9fb80566d3421"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="octree_8h.html#a32d0722050bcdd7588e9fb80566d3421">octree_add</a> (<a class="el" href="structoctree__node.html">octree_node</a> *node, <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> t1[3], <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> t2[3], <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> t3[3], int id)</td></tr>
<tr class="memdesc:a32d0722050bcdd7588e9fb80566d3421"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add triangle to the node(s) it belongs to.  <a href="octree_8h.html#a32d0722050bcdd7588e9fb80566d3421">More...</a><br /></td></tr>
<tr class="separator:a32d0722050bcdd7588e9fb80566d3421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a306a13544a6a82c24220688cef615839"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlist__int__node.html">list_int_node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="octree_8h.html#a306a13544a6a82c24220688cef615839">octree_get</a> (<a class="el" href="structoctree__node.html">octree_node</a> *node, <a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a> p[3])</td></tr>
<tr class="memdesc:a306a13544a6a82c24220688cef615839"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get that leaf node's linked list the given coordinate belongs to.  <a href="octree_8h.html#a306a13544a6a82c24220688cef615839">More...</a><br /></td></tr>
<tr class="separator:a306a13544a6a82c24220688cef615839"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for <a class="el" href="octree_8c.html" title="Simple octree for storing triangles.">octree.c</a>. </p>

<p class="definition">Definition in file <a class="el" href="octree_8h_source.html">octree.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a213eac7af4c986e40b127323a2623b89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a213eac7af4c986e40b127323a2623b89">&#9670;&nbsp;</a></span>octree_node</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structoctree__node.html">octree_node</a> <a class="el" href="structoctree__node.html">octree_node</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Struct representing single octree node. </p>
<p>Stores eight child nodes, bounding box of the volume this node encloses, and a linked list containing IDs of triangles belonging to this node. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a63644b2d301b5599dff501129f610669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63644b2d301b5599dff501129f610669">&#9670;&nbsp;</a></span>octree_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void octree_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structoctree__node.html">octree_node</a> **&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>x_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>x_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>y_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>y_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>z_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>z_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create octree of given depth. </p>
<p>This function creates recursively a complete octree hierarchy with given number of levels. Each node have bounding box asigned and there is a small overlap between the boxes to avoid numerical artifact where a point is exactly between two boxes but belongs to neither.</p>
<p>The linked lists on leaf nodes are initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>pointer to parent node from which the octree sprawls </td></tr>
    <tr><td class="paramname">x_min</td><td>minimum x coordinate of the parent node </td></tr>
    <tr><td class="paramname">x_max</td><td>maximum x coordinate of the parent node </td></tr>
    <tr><td class="paramname">y_min</td><td>minimum y coordinate of the parent node </td></tr>
    <tr><td class="paramname">y_max</td><td>maximum y coordinate of the parent node </td></tr>
    <tr><td class="paramname">z_min</td><td>minimum z coordinate of the parent node </td></tr>
    <tr><td class="paramname">z_max</td><td>maximum z coordinate of the parent node </td></tr>
    <tr><td class="paramname">depth</td><td>levels of octree nodes to be created. If depth=1, this node will be a leaf node. Final volume will be 1/8^(depth-1) th of the initial volume. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="octree_8c_source.html#l00046">46</a> of file <a class="el" href="octree_8c_source.html">octree.c</a>.</p>

</div>
</div>
<a id="a5ebab3217beacb1201887631a364e75e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ebab3217beacb1201887631a364e75e">&#9670;&nbsp;</a></span>octree_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void octree_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structoctree__node.html">octree_node</a> **&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free octree node and all its child nodes. </p>
<p>Deallocates node and its child node recursively. Linked lists are also freed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>pointer to octree node </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="octree_8c_source.html#l00091">91</a> of file <a class="el" href="octree_8c_source.html">octree.c</a>.</p>

</div>
</div>
<a id="a32d0722050bcdd7588e9fb80566d3421"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d0722050bcdd7588e9fb80566d3421">&#9670;&nbsp;</a></span>octree_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void octree_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structoctree__node.html">octree_node</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>t1</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>t2</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>t3</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add triangle to the node(s) it belongs to. </p>
<p>This function uses recursion to travel the octree and find all leaf nodes the given triangle belongs to.In other words, at each step this function determines the child node(s) the triangle belongs to and calls this function for that/those node(s).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>octree node to which or to which child nodes triangle is added to </td></tr>
    <tr><td class="paramname">t1</td><td>triangle first vertex xyz coordinates </td></tr>
    <tr><td class="paramname">t2</td><td>triangle second vertex xyz coordinates </td></tr>
    <tr><td class="paramname">t3</td><td>triangle third vertex xyz coordinates </td></tr>
    <tr><td class="paramname">id</td><td>triangle id which is stored in the node(s) the triangle belongs to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="octree_8c_source.html#l00123">123</a> of file <a class="el" href="octree_8c_source.html">octree.c</a>.</p>

</div>
</div>
<a id="a306a13544a6a82c24220688cef615839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a306a13544a6a82c24220688cef615839">&#9670;&nbsp;</a></span>octree_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlist__int__node.html">list_int_node</a>* octree_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structoctree__node.html">octree_node</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ascot5_8h.html#a11d147c64891830c9e79b3315b1b2e21">real</a>&#160;</td>
          <td class="paramname"><em>p</em>[3]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get that leaf node's linked list the given coordinate belongs to. </p>
<p>This function uses recursion to travel through the octree, determining at each step the correct branch to follow next until the leaf node is found. In other words, at each step this function determines the child node the point belongs to and calls this function for that node.</p>
<p>The point is assumed to belong to the volume of the node used in the argument.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>octree node that is traversed </td></tr>
    <tr><td class="paramname">p</td><td>xyz coordinates of the point</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>linked list of the leaf node given point belongs to </dd></dl>

<p class="definition">Definition at line <a class="el" href="octree_8c_source.html#l00164">164</a> of file <a class="el" href="octree_8c_source.html">octree.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Oct 3 2023 12:32:41 for ASCOT5 by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
